!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@ngrx/store"),require("rxjs/observable/merge"),require("rxjs/operator/ignoreElements"),require("rxjs/operator/materialize"),require("rxjs/operator/map"),require("@angular/core"),require("rxjs/Observable"),require("rxjs/operator/filter"),require("rxjs/operator/groupBy"),require("rxjs/operator/mergeMap"),require("rxjs/operator/exhaustMap"),require("rxjs/operator/dematerialize"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["exports","@ngrx/store","rxjs/observable/merge","rxjs/operator/ignoreElements","rxjs/operator/materialize","rxjs/operator/map","@angular/core","rxjs/Observable","rxjs/operator/filter","rxjs/operator/groupBy","rxjs/operator/mergeMap","rxjs/operator/exhaustMap","rxjs/operator/dematerialize","rxjs/Subject"],r):r((e.ngrx=e.ngrx||{},e.ngrx.effects={}),e.ngrx.store,e.Rx.Observable,e.Rx.Observable.prototype,e.materialize,e.map,e.ng.core,e.Rx,e.Rx.Observable.prototype,e.groupBy,e.mergeMap,e.exhaustMap,e.dematerialize,e.Subject)}(this,function(e,r,t,o,n,c,a,i,u,s,f,p,l,d){"use strict";function y(e){var r=(void 0===e?{dispatch:!0}:e).dispatch;return function(e,t){!function(e,r){var t=e.constructor,o=t.hasOwnProperty(E)?t[E]:Object.defineProperty(t,E,{value:[]})[E];Array.prototype.push.apply(o,r)}(e,[{propertyName:t,dispatch:r}])}}function g(e){return Object.getPrototypeOf(e)}function h(e){var r=g(e).constructor.name,a=O(e).map(function(t){var a=t.propertyName,i=t.dispatch,u="function"==typeof e[a]?e[a]():e[a];if(!1===i)return o.ignoreElements.call(u);var s=n.materialize.call(u);return c.map.call(s,function(t){return{effect:e[a],notification:t,propertyName:a,sourceName:r,sourceInstance:e}})});return t.merge.apply(void 0,a)}function x(e){var r=h(e);return function(e){var r=g(e);return S in r&&"function"==typeof r[S]}(e)?e.ngrxOnRunEffects(r):r}function m(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r){return u.filter.call(r,function(r){return e.some(function(e){return e===r.type})})}}function v(e,r){!function(e,r){"E"===e.notification.kind&&r.handleError(e.notification.error)}(e,r),function(e,r){if("N"===e.notification.kind){var t=e.notification.value;!function(e){return e&&e.type&&"string"==typeof e.type}(t)&&r.handleError(new Error("Effect "+function(e){var r=e.propertyName,t=e.sourceInstance,o=e.sourceName,n="function"==typeof t[r];return'"'+o+"."+r+(n?"()":"")+'"'}(e)+" dispatched an invalid action: "+t))}}(e,r)}function b(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e}var j=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),E="__@ngrx/effects__",O=r.compose(function(e){return e.constructor[E]||[]},g),S="ngrxOnRunEffects",M=function(e){function r(r){var t=e.call(this)||this;return r&&(t.source=r),t}return j(r,e),r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.ofType=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return m.apply(void 0,e)(this)},r}(i.Observable);M.decorators=[{type:a.Injectable}],M.ctorParameters=function(){return[{type:i.Observable,decorators:[{type:a.Inject,args:[r.ScannedActionsSubject]}]}]};var _=function(e){function r(r){var t=e.call(this)||this;return t.errorHandler=r,t}return j(r,e),r.prototype.addEffects=function(e){this.next(e)},r.prototype.toActions=function(){var e=this;return f.mergeMap.call(s.groupBy.call(this,g),function(r){return l.dematerialize.call(u.filter.call(c.map.call(p.exhaustMap.call(r,x),function(r){return v(r,e.errorHandler),r.notification}),function(e){return"N"===e.kind}))})},r}(d.Subject);_.decorators=[{type:a.Injectable}],_.ctorParameters=function(){return[{type:a.ErrorHandler}]};new a.InjectionToken("ngrx/effects: Immediate Effects");var I=new a.InjectionToken("ngrx/effects: Root Effects"),q=new a.InjectionToken("ngrx/effects: Feature Effects"),N=function(){function e(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}return e.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},e.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},e}();N.decorators=[{type:a.Injectable}],N.ctorParameters=function(){return[{type:_},{type:r.Store}]};var P="@ngrx/effects/init",R=function(){function e(e,r,t,o,n,c){this.sources=e,r.start(),o.forEach(function(r){return e.addEffects(r)}),t.dispatch({type:P})}return e.prototype.addEffects=function(e){this.sources.addEffects(e)},e}();R.decorators=[{type:a.NgModule,args:[{}]}],R.ctorParameters=function(){return[{type:_},{type:N},{type:r.Store},{type:Array,decorators:[{type:a.Inject,args:[I]}]},{type:r.StoreRootModule,decorators:[{type:a.Optional}]},{type:r.StoreFeatureModule,decorators:[{type:a.Optional}]}]};var w=function(){return function(e,r,t,o){this.root=e,r.forEach(function(r){return r.forEach(function(r){return e.addEffects(r)})})}}();w.decorators=[{type:a.NgModule,args:[{}]}],w.ctorParameters=function(){return[{type:R},{type:Array,decorators:[{type:a.Inject,args:[q]}]},{type:r.StoreRootModule,decorators:[{type:a.Optional}]},{type:r.StoreFeatureModule,decorators:[{type:a.Optional}]}]};var z=function(){function e(){}return e.forFeature=function(e){return{ngModule:w,providers:[e,{provide:q,multi:!0,deps:e,useFactory:b}]}},e.forRoot=function(e){return{ngModule:R,providers:[N,_,M,e,{provide:I,deps:e,useFactory:b}]}},e}();z.decorators=[{type:a.NgModule,args:[{}]}],z.ctorParameters=function(){return[]},e.Effect=y,e.getEffectsMetadata=function(e){var r={};return O(e).forEach(function(e){var t=e.propertyName,o=e.dispatch;r[t]={dispatch:o}}),r},e.mergeEffects=h,e.Actions=M,e.ofType=m,e.EffectsModule=z,e.EffectSources=_,e.ROOT_EFFECTS_INIT=P,e.ɵc=w,e.ɵa=b,e.ɵb=R,e.ɵf=N,e.ɵe=q,e.ɵd=I,Object.defineProperty(e,"__esModule",{value:!0})});